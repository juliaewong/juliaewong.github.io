<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Julia Wong â€“ Interactive PCB</title>

  <!-- model-viewer -->
  <script type="module"
    src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
  </script>

  <style>
    body {
      margin: 0;
      background: #e6e6ee;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }

    model-viewer {
      width: 90vw;
      height: 90vh;
    }

    /* Invisible-but-clickable PCB buttons */
    .pcb-button {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.0);
      border: 2px solid rgba(255, 255, 255, 0.0);
      cursor: pointer;
    }

    /* OPTIONAL: turn this on while positioning */
    /*
    .pcb-button {
      background: rgba(255, 0, 0, 0.3);
      border: 2px solid red;
    }
    */
  </style>
</head>

<body>
  
  <model-viewer
    id="pcb"
    src="pcb_site.glb"
    alt="Interactive PCB portfolio"
    camera-controls
    auto-rotate
    rotation-per-second="12deg"
    camera-target="0m 0m 0m"
    camera-orbit="45deg 65deg 2.5m"
    exposure="1.25"
    shadow-intensity="1"
    tone-mapping="aces"
    interaction-prompt="none">
    
    <!-- ðŸ”˜ RESUME BUTTON -->
    <button
      class="pcb-button"
      slot="hotspot-resume"
      data-position="0m 0.01m 0.02m"
      data-normal="0m 1m 0m"
      onclick="goResume()">
    </button>

    <!-- ðŸ”˜ TIMELINE BUTTON -->
    <button
      class="pcb-button"
      slot="hotspot-timeline"
      data-position="0.03m 0.01m -0.01m"
      data-normal="0m 1m 0m"
      onclick="goTimeline()">
    </button>

  </model-viewer>

  <script>
    /* -------- Navigation -------- */
    function goResume() {
      window.location.href = "resume.html";
    }

    function goTimeline() {
      window.location.href = "timeline.html";
    }

    /* -------- KiCad â†’ WebGL Fixes -------- */
    const viewer = document.getElementById('pcb');

    viewer.addEventListener('load', () => {
      const model = viewer.model;
      if (!model) return;

      model.materials.forEach(mat => {
        // Fix backface culling
        mat.doubleSided = true;

        // Improve visibility
        if (mat.pbrMetallicRoughness) {
          mat.pbrMetallicRoughness.metallicFactor *= 0.6;
          mat.pbrMetallicRoughness.roughnessFactor *= 0.9;
        }

        // Slight transparency for 7-seg housing
        const name = (mat.name || "").toLowerCase();
        if (name.includes("display") || name.includes("segment")) {
          const base = mat.pbrMetallicRoughness.baseColorFactor;
          base[3] = 0.15;
        }
      });
    });
  </script>

</body>
</html>
